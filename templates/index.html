<!doctype html>
<link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon"> 
<title>Plagio</title>
 <h1>Welcome to Plagio</h1>
<script src="/js/jquery.js"></script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
<script>


$(document).ready(function() {
         
           $("#uploadform").submit(function(event) {
                      event.preventDefault();
                     var data = new FormData(this);
                     console.log(data);
                   $.ajax({
                       type        : "POST",
                       url         : "/",
                       data        : data,
                       contentType : false,
                       processData : false
                       }).done(function (data) {
                            console.log(data);
                       });
            });

           $("#addfiles").click(function(){
            var num = $("#fileuploads input").length;
            num =  parseInt(num)
            var html_string = $("#fileuploads").html()
            for (i = num+1 ; i <= num+2 ; i++) {
                n = i.toString();
                html_string+= "<br><input type='file' class='form-control' name='file"+n+"'>";
            }            
                $("#fileuploads").html(html_string);
           });

           // for populating initial data
           $.get( "/getfiles", function( data ) {
                 console.log(data);
                 var html_string ="";
                 if (data.length !=0){
                 for (filename in data){
                 html_string += "<option value='"+data[filename]+"'>"+data[filename]+"</option>"
                   }
                  $("#corpusfiles").html(html_string);
                  $("#patternfiles").html(html_string);
                 }
            });
           $("#plagcheck").click(function(){
                 var post_obj = {};
                 post_obj["pattern_files"] = $("#patternfiles").val();
                 corpus_files = $("#corpusfiles").val();
                 c_files = {}
                 for (file in corpus_files ){
                     c_files[file] = corpus_files[file];
                 }
                 post_obj['corpus_files'] = c_files;
                 post_obj["algorithm"] = $("#algorithm").val();
                 console.log(post_obj);
                 post_obj = JSON.stringify(post_obj);
                 console.log(post_obj);
                 $.ajax({
                     url: '/plagcheck',
                     type: 'post',
                     data: post_obj,
                     dataType: 'text',
                     success: function (data) {
                      console.log("success");
                     },
                });
           }); 
                  



});

</script>
 <button class="btn" id="addfiles"> Upload more files </button>

    <form method="post" id="uploadform">
            <label for="inputPassword">Upload</label>
            <div id="fileuploads">
            <input type="file" class="form-control" id="uploadfile" name="file1">
            </div>
        <button type="submit" class="btn btn-primary">Upload</button>
    </form>
<div class="container-fluid">
	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-5">
					<h3>
						Select the file for Pattern
					</h3>
                                        <select class="form-control" id="patternfiles">
                                        </select>
				</div>
				<div class="col-md-2" >
					<h3>
						Select the Algorithm
					</h3>
                                        <select class="form-control" id="algorithm">
                                            <option value="nss">Naive String Search</option>
                                            <option value="lcss">LCSS</option>
                                            <option value="kmp">KMP</option>
                                            <option value="bm">Boyer Moore</option>
                                        </select>

				</div>
				<div class="col-md-5">
					<h3>
						Select the Corpus files
					</h3>
                                         <select multiple class="form-control" id="corpusfiles">
                                        </select>

				</div>
                                 <button class="btn btn-primary" id="plagcheck">Check for Plagirism</button> 
			</div>
		</div>
	</div>
</div>





